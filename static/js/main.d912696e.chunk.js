(this.webpackJsonpsugoi=this.webpackJsonpsugoi||[]).push([[0],{12:function(e,t,a){e.exports={root:"Activity_root__3Ogef",header:"Activity_header__2zif8",headerText:"Activity_headerText__l1xHY",padding:"Activity_padding__3-Gep",feed:"Activity_feed__yzqNn",row:"Activity_row__XVWXi",text:"Activity_text__3_K9X",date:"Activity_date__1i1lt",calendar:"Activity_calendar__VOhm7",calendarDot:"Activity_calendarDot__QyWRC","color-empty":"Activity_color-empty__15nMc","color-scale-1":"Activity_color-scale-1__3SJPi","color-scale-2":"Activity_color-scale-2__1YEBv","color-scale-3":"Activity_color-scale-3__1pYqc","color-scale-4":"Activity_color-scale-4__1SLZq","color-scale-5":"Activity_color-scale-5__2D4vF","color-scale-6":"Activity_color-scale-6__HkT9B","color-scale-dark":"Activity_color-scale-dark__3_MfN",tooltip:"Activity_tooltip__2DkRG",tooltipText:"Activity_tooltipText__c8Pon"}},19:function(e,t,a){e.exports={root:"Anime_root__16GQj",header:"Anime_header__1yIwg",description:"Anime_description__2zCjd",name:"Anime_name__IJM8J",watched:"Anime_watched__2bkKN",deleteColumn:"Anime_deleteColumn__3NnRr",deleting:"Anime_deleting__3j07-"}},22:function(e,t,a){e.exports={root:"EpisodeList_root__2LNOP",episode:"EpisodeList_episode__uydlO",episodeName:"EpisodeList_episodeName__1puF4",watchedAt:"EpisodeList_watchedAt__1QoZs"}},25:function(e,t,a){e.exports={root:"Home_root__2uR89",header:"Home_header__348Nd",text:"Home_text__FE-HM",padding:"Home_padding__1Stm0"}},26:function(e,t,a){e.exports={root:"AnimeList_root__Q_kjR",anime:"AnimeList_anime__1SRSM",animeName:"AnimeList_animeName__1kJKu",animeEpisodes:"AnimeList_animeEpisodes__2dqWv"}},27:function(e,t,a){e.exports={root:"Header_root__2R_Rn",logo:"Header_logo__3_SJs",buttons:"Header_buttons__12gv4"}},30:function(e,t,a){e.exports={root:"Register_root__2C-FL",text:"Register_text__1K0oy",error:"Register_error__1s96k"}},31:function(e,t,a){e.exports={root:"Login_root__4bv6e",text:"Login_text__26fLU",error:"Login_error__2Rc1Q"}},36:function(e,t,a){e.exports={root:"AddAnime_root__3ZKlg",text:"AddAnime_text__3sfGy"}},37:function(e,t,a){e.exports={root:"AddEpisodes_root__1sewz",text:"AddEpisodes_text__YZvIE"}},44:function(e,t,a){e.exports={root:"Button_root__2bb-J"}},47:function(e,t,a){e.exports=a(62)},52:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(40),i=a.n(s),o=(a(52),a(28)),c=a(1),l=a.n(c),d=a(2),u=a(3),p=a(4),m=a(6),h=a(5),f=a(8),b=a(7),v=a(17),g=a(9),_=a(18),E=a(25),O=a.n(E),w=a(26),j=a.n(w),y=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.animes;return r.a.createElement("div",{className:j.a.root},e&&e.map(function(e){return r.a.createElement(g.b,{to:"/anime?id=".concat(e._id.toString()),key:e._id.toString(),className:j.a.anime},r.a.createElement("div",{className:j.a.animeName},e.name),r.a.createElement("div",{className:j.a.animeEpisodes},e.watched," / ",e.episode_total))}))}}]),t}(n.Component),x=a(44),A=a.n(x),k=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onClick=a.onClick.bind(Object(f.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"onClick",value:function(){this.props.onClick&&this.props.onClick()}},{key:"render",value:function(){return r.a.createElement("button",{onClick:this.onClick,className:[A.a.root,this.props.className].join(" ")},this.props.children)}}]),t}(n.Component),C=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:O.a.root},r.a.createElement("div",{className:O.a.header},r.a.createElement("div",{className:O.a.text},"Your List"),r.a.createElement(g.b,{className:O.a.padding,to:"/addanime"},r.a.createElement(k,null,"Add another"))),r.a.createElement(y,{animes:this.props.animes}))}}]),t}(n.Component),S=a(45),N=a.n(S),D=a(12),L=a.n(D);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(a,!0).forEach(function(t){Object(o.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var R=function(e,t){var a={};return e.forEach(function(e){var n=JSON.stringify(t(e));a[n]=a[n]||[],a[n].push(e)}),Object.keys(a).map(function(e){return a[e]})},I=function(e){var t=[],a=e[0].watchedAt.toLocaleDateString("en-US"),n=0;return e.forEach(function(e){var r=e.watchedAt.toLocaleDateString("en-US");a!==r?(t.push({date:a,count:n}),a=r,n=1):n++}),t.push({date:a,count:n}),t},U=function(e,t){var a=[];return e.forEach(function(e){e[0].watchedAt.toLocaleDateString("en-US")===t&&a.push({anime:e[0].name,count:e.length,date:t})}),a},W=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).componentDidMount=Object(d.a)(l.a.mark(function e(){var t,n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.displayEpisodes({watched:!0},{sort:{watchedAt:-1}});case 2:t=e.sent,n=t.length&&R(t,function(e){return[e.anime_id,e.watchedAt.toLocaleDateString("en-US")]}),r=t.length&&I(t),a.setState({feed:n,calendarData:r,calendarLabels:n});case 6:case"end":return e.stop()}},e)})),a.createFeed=Object(d.a)(l.a.mark(function e(){var t,n,r=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,a.props.displayEpisodes(M({},t,{watched:!0}),{sort:{watchedAt:-1}});case 3:return n=e.sent,e.abrupt("return",n.length&&R(n,function(e){return[e.anime_id,e.watchedAt.toLocaleDateString("en-US")]}));case 5:case"end":return e.stop()}},e)})),a.squareClick=function(){var e=Object(d.a)(l.a.mark(function e(t){var n,r,s,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,a.createFeed();case 3:return n=e.sent,e.abrupt("return",a.setState({feed:n}));case 5:return r=new Date(t.date),s=new Date(r.getFullYear(),r.getMonth(),r.getDate()+1),e.next=9,a.createFeed({watchedAt:{$gte:r,$lt:s}});case 9:i=e.sent,a.setState({feed:i});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={feed:[],calendarLabels:[],calendarData:[],mouseOver:[],mousePosition:[0,0],hovering:!1,selectedDate:null},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:L.a.root},this.state.hovering&&r.a.createElement("div",{style:{left:this.state.mousePosition[0],top:this.state.mousePosition[1]},className:L.a.tooltip},this.state.mouseOver&&this.state.mouseOver.map(function(e){return r.a.createElement("div",{key:"".concat(e.anime," - ").concat(e.date),className:L.a.tooltipText},e.count," episodes of ",e.anime,r.a.createElement("span",null," on ",e.date))})),r.a.createElement("div",{className:L.a.header},r.a.createElement("div",{className:L.a.headerText},"Activity Feed")),r.a.createElement("div",{onClick:function(t){t.target===t.currentTarget&&e.squareClick()}},r.a.createElement("div",{onClick:function(t){t.target===t.currentTarget&&e.squareClick()},className:L.a.calendar},r.a.createElement(N.a,{startDate:(new Date).setMonth((new Date).getMonth()-6),endDate:new Date,values:this.state.calendarData.length&&this.state.calendarData||[{date:new Date("1/1/1990"),count:1}],gutterSize:3,onMouseOver:function(t,a){return a&&e.setState({hovering:!0,mouseOver:U(e.state.calendarLabels,a.date),mousePosition:[t.clientX,t.clientY]})},onMouseLeave:function(){return e.setState({hovering:!1})},onClick:function(t){return e.squareClick(t)},classForValue:function(e){return e?e.count>6?L.a["color-scale-dark"]:L.a["color-scale-".concat(e.count)]:L.a["color-empty"]},transformDayElement:function(e,t,a){return r.a.cloneElement(e,{rx:"100%"})}}))),r.a.createElement("div",{className:L.a.feed},this.state.feed.length&&this.state.feed.map(function(e){return r.a.createElement("div",{key:e[0]._id,className:L.a.row},r.a.createElement("div",{className:L.a.text},"Watched ".concat(e.length," episodes of "),r.a.createElement(g.b,{to:"/anime?id=".concat(e[0].anime_id.toString())},e[0].name),"."),r.a.createElement("div",{className:L.a.date},e[0].watchedAt.toLocaleDateString("en-US")))})))}}]),t}(n.Component),F=a(24),Y=a(19),H=a.n(Y),T=a(22),J=a.n(T),q=a(46),V=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.episodes,a=e.toggleEpisode;return r.a.createElement("div",{className:J.a.root},t&&t.map(function(e){return r.a.createElement("div",{onClick:function(){return a(e.anime_id,e._id,e.watched)},key:e.episode,className:J.a.episode},r.a.createElement("div",{className:J.a.text},r.a.createElement("div",{className:J.a.episodeName},"Episode ",e.episode),r.a.createElement("div",{className:J.a.watchedAt},e.watched&&"Watched on ".concat(e.watchedAt.toLocaleDateString("en-US")))),e.watched&&r.a.createElement(q.a,null))}))}}]),t}(n.Component),$=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).componentDidMount=Object(d.a)(l.a.mark(function e(){var t,n,r,s,i,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URLSearchParams(a.props.location.search).get("id"),n=new v.a.ObjectId(t),e.next=4,a.props.displayAnimes({_id:n});case 4:return r=e.sent,s=Object(F.a)(r,1),i=s[0],e.next=9,a.props.displayEpisodes({anime_id:n});case 9:o=e.sent,a.setState({anime:i,episodes:o});case 11:case"end":return e.stop()}},e)})),a.delete=Object(d.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({deleting:!0}),e.next=3,a.props.deleteAnime(a.state.anime._id);case 3:a.setState({home:!0,deleting:!1});case 4:case"end":return e.stop()}},e)})),a.toggleEpisode=function(){var e=Object(d.a)(l.a.mark(function e(t,n,r){var s,i,o,c,d;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.state.anime._id,e.next=3,a.props.toggleEpisode(t,n,r);case 3:return e.next=5,a.props.displayEpisodes({anime_id:s});case 5:return i=e.sent,e.next=8,a.props.displayAnimes({_id:s});case 8:o=e.sent,c=Object(F.a)(o,1),d=c[0],a.setState({anime:d,episodes:i});case 12:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.state={anime:{},episodes:[],home:!1,deleting:!1},a.delete=a.delete.bind(Object(f.a)(a)),a.toggleEpisode=a.toggleEpisode.bind(Object(f.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.anime,a=e.episodes,n=e.home,s=e.deleting;return r.a.createElement("div",{className:H.a.root},n&&r.a.createElement(_.a,{to:"/"}),r.a.createElement("div",{className:H.a.header},r.a.createElement("div",{className:H.a.description},r.a.createElement("div",{className:H.a.name},t.name),r.a.createElement("div",{className:H.a.watched},t.watched," / ",t.episode_total," watched")),r.a.createElement("div",{className:H.a.deleteColumn},r.a.createElement(k,{onClick:this.delete},"Delete"),s&&r.a.createElement("div",{className:H.a.deleting},"Deleting anime.."))),r.a.createElement(V,{toggleEpisode:this.toggleEpisode,episodes:a}))}}]),t}(n.Component),z=a(36),B=a.n(z),K=(a(61),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onChange=function(e){e.preventDefault(),a.props.onChange(e.target.value)},a.onChange=a.onChange.bind(Object(f.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("input",{onChange:this.onChange,placeholder:this.props.placeholder,type:this.props.type||"text",value:this.props.value})}}]),t}(n.Component)),Q=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onClick=Object(d.a)(l.a.mark(function e(){var t,n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.name,r=t.episodes,e.next=3,a.props.addAnime({name:n,episodes:r});case 3:a.setState({home:!0});case 4:case"end":return e.stop()}},e)})),a.changeEpisodes=function(e){isNaN(e)||a.setState({episodes:e})},a.state={name:"",episodes:"",home:!1},a.onClick=a.onClick.bind(Object(f.a)(a)),a.changeEpisodes=a.changeEpisodes.bind(Object(f.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:B.a.root},this.state.home&&r.a.createElement(_.a,{to:"/list"}),r.a.createElement("div",{className:B.a.text},"Add an anime"),r.a.createElement(K,{onChange:function(t){return e.setState({name:t})},placeholder:"Name",type:"text",value:this.state.name}),r.a.createElement(K,{onChange:this.changeEpisodes,placeholder:"# Episodes Total",type:"text",value:this.state.episodes}),r.a.createElement(k,{onClick:this.onClick},"Add anime"))}}]),t}(n.Component),G=a(37),X=a.n(G),Z=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).onClick=Object(d.a)(l.a.mark(function e(){var t,n,r,s,i,o,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.name,r=t.date,s=t.episodes,e.next=3,a.props.displayAnimes({name:n});case 3:return i=e.sent,o=Object(F.a)(i,1),c=o[0],e.next=8,a.props.watchEpisodes(c._id,parseInt(s),new Date(r));case 8:a.setState({home:!0});case 9:case"end":return e.stop()}},e)})),a.state={name:"",date:"",episodes:"",home:!1},a.onClick=a.onClick.bind(Object(f.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:X.a.root},this.state.home&&r.a.createElement(_.a,{to:"/"}),r.a.createElement("div",{className:X.a.text},"Add episodes"),r.a.createElement(K,{onChange:function(t){return e.setState({name:t})},placeholder:"Anime",type:"text",value:this.state.name}),r.a.createElement(K,{onChange:function(t){return e.setState({episodes:t})},placeholder:"Episodes watched",value:this.state.episodes}),r.a.createElement(K,{onChange:function(t){return e.setState({date:t})},placeholder:"Date watched (MM/DD/YYYY)",type:"text",value:this.state.date}),r.a.createElement(k,{onClick:this.onClick},"Add episodes"))}}]),t}(n.Component),ee=a(30),te=a.n(ee),ae=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).register=Object(d.a)(l.a.mark(function e(){var t,n,r,s,i,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props.registerUser,n=a.state,r=n.email,s=n.password,i=n.passwordVerification,s===i){e.next=5;break}return a.setState({error:"Passwords do not match"}),e.abrupt("return");case 5:return e.next=7,t({email:r,password:s});case 7:if(!((o=e.sent)&&o.stack&&o.message)){e.next=11;break}return a.setState({error:o.message}),e.abrupt("return");case 11:console.log(o),a.setState({toLogin:!0});case 13:case"end":return e.stop()}},e)})),a.state={email:"",password:"",passwordVerification:"",error:null,toLogin:!1},a.register=a.register.bind(Object(f.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:te.a.root},this.state.toLogin&&r.a.createElement(_.a,{to:"/login"}),r.a.createElement("div",{className:te.a.text},"Create a new account"),r.a.createElement(K,{onChange:function(t){return e.setState({email:t})},placeholder:"Email",type:"text",value:this.state.email}),r.a.createElement(K,{onChange:function(t){return e.setState({password:t})},placeholder:"Password",type:"password",value:this.state.password}),r.a.createElement(K,{onChange:function(t){return e.setState({passwordVerification:t})},placeholder:"Verify password",type:"password",value:this.state.passwordVerification}),r.a.createElement(k,{onClick:this.register},"Sign in"),this.state.error&&r.a.createElement("div",{className:te.a.error},this.state.error))}}]),t}(n.Component),ne=a(31),re=a.n(ne),se=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).login=function(){var e=a.props.loginUser,t=a.state;e({email:t.email,password:t.password}).catch(function(e){a.setState({error:e.message})})},a.state={email:"",password:""},a.login=a.login.bind(Object(f.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:re.a.root},r.a.createElement("div",{className:re.a.text},"Sign in"),r.a.createElement(K,{onChange:function(t){return e.setState({email:t})},placeholder:"Email",type:"text",value:this.state.email}),r.a.createElement(K,{onChange:function(t){return e.setState({password:t})},placeholder:"Password",type:"password",value:this.state.password}),r.a.createElement(k,{onClick:this.login},"Sign in"),this.state.error&&r.a.createElement("div",{className:re.a.error},this.state.error))}}]),t}(n.Component),ie=a(27),oe=a.n(ie),ce=r.a.createElement("div",{className:oe.a.buttons},r.a.createElement(g.b,{to:"/login"},"Login"),r.a.createElement(g.b,{to:"/register"},"Register")),le=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:oe.a.root},r.a.createElement(g.b,{to:"/",className:oe.a.logo},"Sugoi"),this.props.isAuthed?(e=this.props.logout,r.a.createElement("div",{className:oe.a.buttons},r.a.createElement(g.b,{to:"/"},"My Feed"),r.a.createElement(g.b,{to:"/List"},"My List"),r.a.createElement(g.b,{to:"/AddAnime"},"Add Anime"),r.a.createElement(g.b,{to:"/AddEpisodes"},"Add Episodes"),r.a.createElement("div",{onClick:function(){return e()}},"Logout"))):ce);var e}}]),t}(n.Component);function de(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?de(a,!0).forEach(function(t){Object(o.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):de(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var pe=v.c.hasAppClient("sago-ghffe")?v.c.getAppClient("sago-ghffe"):v.c.initializeAppClient("sago-ghffe"),me=pe.getServiceClient(v.b.factory,"mongodb-atlas"),he=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).componentDidMount=Object(d.a)(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:pe.auth.hasRedirectResult()&&pe.auth.handleRedirectResult().then(function(t){e.setState({isAuthed:pe.auth.isLoggedIn})});case 1:case"end":return t.stop()}},t)})),e.addAnime=function(){var t=Object(d.a)(l.a.mark(function t(a){var n,r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.db.collection("animes").insertOne({owner_id:e.state.userId,name:a.name,watched:0,episode_total:parseInt(a.episodes)});case 2:return n=t.sent,t.next=5,e.addEpisodes(n.insertedId,a.name,a.episodes);case 5:return t.next=7,e.displayAnimes();case 7:return r=t.sent,e.setState({animes:r}),t.abrupt("return",n);case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.deleteAnime=function(){var t=Object(d.a)(l.a.mark(function t(a){var n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.db.collection("animes").deleteOne({_id:a});case 2:return t.next=4,e.db.collection("episodes").deleteMany({anime_id:a});case 4:return t.next=6,e.displayAnimes();case 6:n=t.sent,e.setState({animes:n});case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.incrementWatched=function(){var t=Object(d.a)(l.a.mark(function t(a,n){var r,s;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.db.collection("animes").updateOne({_id:a},{$inc:{watched:n}});case 2:return r=t.sent,t.next=5,e.displayAnimes();case 5:return s=t.sent,e.setState({animes:s}),t.abrupt("return",r);case 8:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),e.displayAnimes=Object(d.a)(l.a.mark(function t(){var a,n,r=arguments;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:{},t.next=3,e.db.collection("animes").find(ue({},a,{owner_id:e.state.userId}),{limit:1e3}).asArray();case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)})),e.addEpisodes=function(){var t=Object(d.a)(l.a.mark(function t(a,n,r){var s,i,o,c;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(s=[],i=1;i<=r;i++)o={anime_id:a,name:n,owner_id:e.state.userId,episode:i,watched:!1,watchedAt:new Date},s.push(o);return t.next=4,e.db.collection("episodes").insertMany(s);case 4:return t.next=6,e.displayEpisodes({anime_id:a});case 6:return c=t.sent,t.abrupt("return",c);case 8:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}(),e.displayEpisodes=Object(d.a)(l.a.mark(function t(){var a,n,r,s=arguments;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.length>0&&void 0!==s[0]?s[0]:{},n=s.length>1&&void 0!==s[1]?s[1]:{},t.next=4,e.db.collection("episodes").find(ue({},a,{owner_id:e.state.userId}),ue({},n,{limit:1e3})).asArray();case 4:return r=t.sent,t.abrupt("return",r);case 6:case"end":return t.stop()}},t)})),e.toggleEpisode=function(){var t=Object(d.a)(l.a.mark(function t(a,n,r){var s;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.db.collection("episodes").updateOne({_id:n},{$set:{watched:!r,watchedAt:new Date}});case 2:return s=t.sent,t.next=5,e.incrementWatched(a,r?-1:1);case 5:return t.abrupt("return",s);case 6:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}(),e.watchEpisodes=function(){var t=Object(d.a)(l.a.mark(function t(a,n){var r,s,i,o=arguments;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:new Date,t.next=3,e.db.collection("episodes").find({anime_id:a,watched:!1},{limit:n}).asArray();case 3:return s=t.sent,i=s.map(function(e){return e._id}),t.next=7,e.db.collection("episodes").updateMany({_id:{$in:i}},{$set:{watched:!0,watchedAt:r}});case 7:return t.next=9,e.incrementWatched(a,n);case 9:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),e.register=Object(d.a)(l.a.mark(function e(){var t,a,n,r,s=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},a=t.email,n=t.password,e.prev=1,e.next=4,me.registerWithEmail(a,n);case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])})),e.login=Object(d.a)(l.a.mark(function t(){var a,n,r,s,i,o,c=arguments;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=c.length>0&&void 0!==c[0]?c[0]:{},n=a.email,r=a.password,!e.state.isAuthed){t.next=4;break}return t.abrupt("return");case 4:return s=new v.d(n,r),t.next=7,pe.auth.loginWithCredential(s);case 7:return i=t.sent,e.setState({isAuthed:!0,userId:new v.a.ObjectId(i.id)}),t.next=11,e.displayAnimes();case 11:o=t.sent,e.setState({animes:o});case 13:case"end":return t.stop()}},t)})),e.logout=Object(d.a)(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:pe.auth.logout(),e.setState({isAuthed:!1});case 2:case"end":return t.stop()}},t)})),e.state={animes:[],isAuthed:!1,userId:null},e.db=me.db("sugoi"),e.register=e.register.bind(Object(f.a)(e)),e.login=e.login.bind(Object(f.a)(e)),e.logout=e.logout.bind(Object(f.a)(e)),e.displayEpisodes=e.displayEpisodes.bind(Object(f.a)(e)),e.displayAnimes=e.displayAnimes.bind(Object(f.a)(e)),e.addAnime=e.addAnime.bind(Object(f.a)(e)),e.deleteAnime=e.deleteAnime.bind(Object(f.a)(e)),e}return Object(b.a)(t,e),Object(p.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){var e=this;return r.a.createElement(g.a,null,r.a.createElement(le,{isAuthed:this.state.isAuthed,logout:this.logout}),this.state.isAuthed?r.a.createElement(_.d,null,r.a.createElement(_.a,{from:"/login",to:"/"}),r.a.createElement(_.a,{from:"/register",to:"/"}),r.a.createElement(_.b,{default:!0,exact:!0,path:"/",render:function(t){return r.a.createElement(W,Object.assign({},t,{displayEpisodes:e.displayEpisodes}))}}),r.a.createElement(_.b,{path:"/list",render:function(t){return r.a.createElement(C,Object.assign({},t,{episodeStream:e.episodeStream,animes:e.state.animes}))}}),r.a.createElement(_.b,{path:"/anime",render:function(t){return r.a.createElement($,Object.assign({},t,{toggleEpisode:e.toggleEpisode,displayAnimes:e.displayAnimes,displayEpisodes:e.displayEpisodes,deleteAnime:e.deleteAnime}))}}),r.a.createElement(_.b,{path:"/addanime",render:function(t){return r.a.createElement(Q,Object.assign({},t,{addAnime:e.addAnime}))}}),r.a.createElement(_.b,{path:"/addepisodes",render:function(t){return r.a.createElement(Z,Object.assign({},t,{watchEpisodes:e.watchEpisodes,displayAnimes:e.displayAnimes}))}})):r.a.createElement(_.d,null,r.a.createElement(_.b,{default:!0,exact:!0,path:"/login",render:function(t){return r.a.createElement(se,Object.assign({},t,{loginUser:e.login}))}}),r.a.createElement(_.b,{path:"/register",render:function(t){return r.a.createElement(ae,Object.assign({},t,{registerUser:e.register}))}})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[47,1,2]]]);
//# sourceMappingURL=main.d912696e.chunk.js.map
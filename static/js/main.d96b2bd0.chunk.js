(this.webpackJsonpsugoi=this.webpackJsonpsugoi||[]).push([[0],{12:function(e,t,a){e.exports={root:"Activity_root__3Ogef",header:"Activity_header__2zif8",headerText:"Activity_headerText__l1xHY",padding:"Activity_padding__3-Gep",feed:"Activity_feed__yzqNn",row:"Activity_row__XVWXi",text:"Activity_text__3_K9X",date:"Activity_date__1i1lt",calendar:"Activity_calendar__VOhm7",calendarDot:"Activity_calendarDot__QyWRC","color-empty":"Activity_color-empty__15nMc","color-scale-1":"Activity_color-scale-1__3SJPi","color-scale-2":"Activity_color-scale-2__1YEBv","color-scale-3":"Activity_color-scale-3__1pYqc","color-scale-4":"Activity_color-scale-4__1SLZq","color-scale-5":"Activity_color-scale-5__2D4vF","color-scale-6":"Activity_color-scale-6__HkT9B","color-scale-dark":"Activity_color-scale-dark__3_MfN",tooltip:"Activity_tooltip__2DkRG",tooltipText:"Activity_tooltipText__c8Pon"}},19:function(e,t,a){e.exports={root:"Anime_root__16GQj",header:"Anime_header__1yIwg",description:"Anime_description__2zCjd",name:"Anime_name__IJM8J",watched:"Anime_watched__2bkKN",deleteColumn:"Anime_deleteColumn__3NnRr",deleting:"Anime_deleting__3j07-"}},22:function(e,t,a){e.exports={root:"EpisodeList_root__2LNOP",episode:"EpisodeList_episode__uydlO",episodeName:"EpisodeList_episodeName__1puF4",watchedAt:"EpisodeList_watchedAt__1QoZs"}},24:function(e,t,a){e.exports={root:"Home_root__2uR89",header:"Home_header__348Nd",text:"Home_text__FE-HM",padding:"Home_padding__1Stm0"}},25:function(e,t,a){e.exports={root:"AnimeList_root__Q_kjR",anime:"AnimeList_anime__1SRSM",animeName:"AnimeList_animeName__1kJKu",animeEpisodes:"AnimeList_animeEpisodes__2dqWv"}},26:function(e,t,a){e.exports={root:"Header_root__2R_Rn",logo:"Header_logo__3_SJs",buttons:"Header_buttons__12gv4"}},29:function(e,t,a){e.exports={root:"Register_root__2C-FL",text:"Register_text__1K0oy",error:"Register_error__1s96k"}},30:function(e,t,a){e.exports={root:"Login_root__4bv6e",text:"Login_text__26fLU",error:"Login_error__2Rc1Q"}},35:function(e,t,a){e.exports={root:"AddAnime_root__3ZKlg",text:"AddAnime_text__3sfGy"}},36:function(e,t,a){e.exports={root:"AddEpisodes_root__1sewz",text:"AddEpisodes_text__YZvIE"}},43:function(e,t,a){e.exports={root:"Button_root__2bb-J"}},46:function(e,t,a){e.exports=a(61)},51:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(39),s=a.n(i),o=(a(51),a(1)),c=a.n(o),l=a(8),d=a(2),u=a(3),p=a(5),m=a(4),h=a(7),f=a(6),v=a(17),_=a(9),b=a(18),g=a(24),E=a.n(g),O=a(25),w=a.n(O),j=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.animes;return r.a.createElement("div",{className:w.a.root},e&&e.map(function(e){return r.a.createElement(_.b,{to:"/anime?id=".concat(e._id.toString()),key:e._id.toString(),className:w.a.anime},r.a.createElement("div",{className:w.a.animeName},e.name),r.a.createElement("div",{className:w.a.animeEpisodes},e.watched," / ",e.episode_total))}))}}]),t}(n.Component),y=a(43),A=a.n(y),x=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).onClick=a.onClick.bind(Object(h.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"onClick",value:function(){this.props.onClick&&this.props.onClick()}},{key:"render",value:function(){return r.a.createElement("button",{onClick:this.onClick,className:[A.a.root,this.props.className].join(" ")},this.props.children)}}]),t}(n.Component),k=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:E.a.root},r.a.createElement("div",{className:E.a.header},r.a.createElement("div",{className:E.a.text},"Your List"),r.a.createElement(_.b,{className:E.a.padding,to:"/addanime"},r.a.createElement(x,null,"Add another"))),r.a.createElement(j,{animes:this.props.animes}))}}]),t}(n.Component),C=a(44),N=a.n(C),S=a(12),D=a.n(S),L=function(e,t){var a={};return e.forEach(function(e){var n=JSON.stringify(t(e));a[n]=a[n]||[],a[n].push(e)}),Object.keys(a).map(function(e){return a[e]})},M=function(e){var t=[],a=e[0].watchedAt.toLocaleDateString("en-US"),n=0;return e.forEach(function(e){var r=e.watchedAt.toLocaleDateString("en-US");a!==r?(t.push({date:a,count:n}),a=r,n=1):n++}),t.push({date:a,count:n}),t},R=function(e,t){var a=[];return e.forEach(function(e){e[0].watchedAt.toLocaleDateString("en-US")===t&&a.push({anime:e[0].name,count:e.length,date:t})}),a},I=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=Object(l.a)(c.a.mark(function e(){var t,n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.displayActivity();case 2:t=e.sent,n=t.length&&L(t,function(e){return[e.anime_id,e.watchedAt.toLocaleDateString("en-US")]}),r=t.length&&M(t),a.setState({feed:n,calendarData:r});case 6:case"end":return e.stop()}},e)})),a.state={feed:[],calendarData:[],mouseOver:[],mousePosition:[0,0],hovering:!1},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:D.a.root},this.state.hovering&&r.a.createElement("div",{style:{left:this.state.mousePosition[0],top:this.state.mousePosition[1]},className:D.a.tooltip},this.state.mouseOver&&this.state.mouseOver.map(function(e){return r.a.createElement("div",{key:"".concat(e.anime," - ").concat(e.date),className:D.a.tooltipText},e.count," episodes of ",e.anime,r.a.createElement("span",null," on ",e.date))})),r.a.createElement("div",{className:D.a.calendar},r.a.createElement(N.a,{startDate:(new Date).setMonth((new Date).getMonth()-6),endDate:new Date,values:this.state.calendarData.length&&this.state.calendarData||[{date:new Date("1/1/1990"),count:1}],gutterSize:3,onMouseOver:function(t,a){return a&&e.setState({hovering:!0,mouseOver:R(e.state.feed,a.date),mousePosition:[t.clientX,t.clientY]})},onMouseLeave:function(){return e.setState({hovering:!1})},classForValue:function(e){return e?e.count>6?D.a["color-scale-dark"]:D.a["color-scale-".concat(e.count)]:D.a["color-empty"]},transformDayElement:function(e,t,a){return r.a.cloneElement(e,{rx:"100%"})}})),r.a.createElement("div",{className:D.a.header},r.a.createElement("div",{className:D.a.headerText},"Activity Feed")),r.a.createElement("div",{className:D.a.feed},this.state.feed.length&&this.state.feed.map(function(e){return r.a.createElement("div",{key:e[0]._id,className:D.a.row},r.a.createElement("div",{className:D.a.text},"Watched ".concat(e.length," episodes of "),r.a.createElement(_.b,{to:"/anime?id=".concat(e[0].anime_id.toString())},e[0].name),"."),r.a.createElement("div",{className:D.a.date},e[0].watchedAt.toLocaleDateString("en-US")))})))}}]),t}(n.Component),U=a(28),W=a(19),P=a.n(W),H=a(22),Y=a.n(H),J=a(45),T=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.episodes,a=e.toggleEpisode;return r.a.createElement("div",{className:Y.a.root},t&&t.map(function(e){return r.a.createElement("div",{onClick:function(){return a(e.anime_id,e._id,e.watched)},key:e.episode,className:Y.a.episode},r.a.createElement("div",{className:Y.a.text},r.a.createElement("div",{className:Y.a.episodeName},"Episode ",e.episode),r.a.createElement("div",{className:Y.a.watchedAt},e.watched&&"Watched on ".concat(e.watchedAt.toLocaleDateString("en-US")))),e.watched&&r.a.createElement(J.a,null))}))}}]),t}(n.Component),V=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=Object(l.a)(c.a.mark(function e(){var t,n,r,i,s,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URLSearchParams(a.props.location.search).get("id"),n=new v.a.ObjectId(t),e.next=4,a.props.displayAnimes({_id:n});case 4:return r=e.sent,i=Object(U.a)(r,1),s=i[0],e.next=9,a.props.displayEpisodes(n);case 9:o=e.sent,a.setState({anime:s,episodes:o});case 11:case"end":return e.stop()}},e)})),a.delete=Object(l.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({deleting:!0}),e.next=3,a.props.deleteAnime(a.state.anime._id);case 3:a.setState({home:!0,deleting:!1});case 4:case"end":return e.stop()}},e)})),a.toggleEpisode=function(){var e=Object(l.a)(c.a.mark(function e(t,n,r){var i,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.state.anime._id,e.next=3,a.props.toggleEpisode(t,n,r);case 3:return e.next=5,a.props.displayEpisodes(i);case 5:s=e.sent,a.setState({episodes:s});case 7:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.state={anime:{},episodes:[],home:!1,deleting:!1},a.delete=a.delete.bind(Object(h.a)(a)),a.toggleEpisode=a.toggleEpisode.bind(Object(h.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.anime,a=e.episodes,n=e.home,i=e.deleting;return r.a.createElement("div",{className:P.a.root},n&&r.a.createElement(b.a,{to:"/"}),r.a.createElement("div",{className:P.a.header},r.a.createElement("div",{className:P.a.description},r.a.createElement("div",{className:P.a.name},t.name),r.a.createElement("div",{className:P.a.watched},t.watched," / ",t.episode_total," watched")),r.a.createElement("div",{className:P.a.deleteColumn},r.a.createElement(x,{onClick:this.delete},"Delete"),i&&r.a.createElement("div",{className:P.a.deleting},"Deleting anime.."))),r.a.createElement(T,{toggleEpisode:this.toggleEpisode,episodes:a}))}}]),t}(n.Component),F=a(35),z=a.n(F),B=(a(60),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).onChange=function(e){e.preventDefault(),a.props.onChange(e.target.value)},a.onChange=a.onChange.bind(Object(h.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("input",{onChange:this.onChange,placeholder:this.props.placeholder,type:this.props.type||"text",value:this.props.value})}}]),t}(n.Component)),K=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).onClick=Object(l.a)(c.a.mark(function e(){var t,n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.name,r=t.episodes,e.next=3,a.props.addAnime({name:n,episodes:r});case 3:a.setState({home:!0});case 4:case"end":return e.stop()}},e)})),a.changeEpisodes=function(e){isNaN(e)||a.setState({episodes:e})},a.state={name:"",episodes:"",home:!1},a.onClick=a.onClick.bind(Object(h.a)(a)),a.changeEpisodes=a.changeEpisodes.bind(Object(h.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:z.a.root},this.state.home&&r.a.createElement(b.a,{to:"/"}),r.a.createElement("div",{className:z.a.text},"Add an anime"),r.a.createElement(B,{onChange:function(t){return e.setState({name:t})},placeholder:"Name",type:"text",value:this.state.name}),r.a.createElement(B,{onChange:this.changeEpisodes,placeholder:"# Episodes Total",type:"text",value:this.state.episodes}),r.a.createElement(x,{onClick:this.onClick},"Add anime"))}}]),t}(n.Component),Q=a(36),$=a.n(Q),q=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).onClick=Object(l.a)(c.a.mark(function e(){var t,n,r,i,s,o,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.name,r=t.date,i=t.episodes,e.next=3,a.props.displayAnimes({name:n});case 3:return s=e.sent,o=Object(U.a)(s,1),l=o[0],e.next=8,a.props.watchEpisodes(l._id,parseInt(i),new Date(r));case 8:a.setState({home:!0});case 9:case"end":return e.stop()}},e)})),a.state={name:"",date:"",episodes:"",home:!1},a.onClick=a.onClick.bind(Object(h.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:$.a.root},this.state.home&&r.a.createElement(b.a,{to:"/"}),r.a.createElement("div",{className:$.a.text},"Add episodes"),r.a.createElement(B,{onChange:function(t){return e.setState({name:t})},placeholder:"Anime",type:"text",value:this.state.name}),r.a.createElement(B,{onChange:function(t){return e.setState({episodes:t})},placeholder:"Episodes watched",value:this.state.episodes}),r.a.createElement(B,{onChange:function(t){return e.setState({date:t})},placeholder:"Date watched (MM/DD/YYYY)",type:"text",value:this.state.date}),r.a.createElement(x,{onClick:this.onClick},"Add episodes"))}}]),t}(n.Component),G=a(29),X=a.n(G),Z=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).register=Object(l.a)(c.a.mark(function e(){var t,n,r,i,s,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props.registerUser,n=a.state,r=n.email,i=n.password,s=n.passwordVerification,i===s){e.next=5;break}return a.setState({error:"Passwords do not match"}),e.abrupt("return");case 5:return e.next=7,t({email:r,password:i});case 7:if(!((o=e.sent)&&o.stack&&o.message)){e.next=11;break}return a.setState({error:o.message}),e.abrupt("return");case 11:console.log(o),a.setState({toLogin:!0});case 13:case"end":return e.stop()}},e)})),a.state={email:"",password:"",passwordVerification:"",error:null,toLogin:!1},a.register=a.register.bind(Object(h.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:X.a.root},this.state.toLogin&&r.a.createElement(b.a,{to:"/login"}),r.a.createElement("div",{className:X.a.text},"Create a new account"),r.a.createElement(B,{onChange:function(t){return e.setState({email:t})},placeholder:"Email",type:"text",value:this.state.email}),r.a.createElement(B,{onChange:function(t){return e.setState({password:t})},placeholder:"Password",type:"password",value:this.state.password}),r.a.createElement(B,{onChange:function(t){return e.setState({passwordVerification:t})},placeholder:"Verify password",type:"password",value:this.state.passwordVerification}),r.a.createElement(x,{onClick:this.register},"Sign in"),this.state.error&&r.a.createElement("div",{className:X.a.error},this.state.error))}}]),t}(n.Component),ee=a(30),te=a.n(ee),ae=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).login=function(){var e=a.props.loginUser,t=a.state;e({email:t.email,password:t.password}).catch(function(e){a.setState({error:e.message})})},a.state={email:"",password:""},a.login=a.login.bind(Object(h.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:te.a.root},r.a.createElement("div",{className:te.a.text},"Sign in"),r.a.createElement(B,{onChange:function(t){return e.setState({email:t})},placeholder:"Email",type:"text",value:this.state.email}),r.a.createElement(B,{onChange:function(t){return e.setState({password:t})},placeholder:"Password",type:"password",value:this.state.password}),r.a.createElement(x,{onClick:this.login},"Sign in"),this.state.error&&r.a.createElement("div",{className:te.a.error},this.state.error))}}]),t}(n.Component),ne=a(26),re=a.n(ne),ie=r.a.createElement("div",{className:re.a.buttons},r.a.createElement(_.b,{to:"/login"},"Login"),r.a.createElement(_.b,{to:"/register"},"Register")),se=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:re.a.root},r.a.createElement(_.b,{to:"/",className:re.a.logo},"Sugoi"),this.props.isAuthed?(e=this.props.logout,r.a.createElement("div",{className:re.a.buttons},r.a.createElement(_.b,{to:"/"},"My Feed"),r.a.createElement(_.b,{to:"/List"},"My List"),r.a.createElement(_.b,{to:"/AddAnime"},"Add Anime"),r.a.createElement(_.b,{to:"/AddEpisodes"},"Add Episodes"),r.a.createElement("div",{onClick:function(){return e()}},"Logout"))):ie);var e}}]),t}(n.Component),oe=v.c.hasAppClient("sago-ghffe")?v.c.getAppClient("sago-ghffe"):v.c.initializeAppClient("sago-ghffe"),ce=oe.getServiceClient(v.b.factory,"mongodb-atlas"),le=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(m.a)(t).call(this))).componentDidMount=function(){oe.auth.hasRedirectResult()&&oe.auth.handleRedirectResult().then(function(t){e.setState({isAuthed:oe.auth.isLoggedIn})})},e.addAnime=function(){var t=Object(l.a)(c.a.mark(function t(a){var n,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.db.collection("animes").insertOne({owner_id:e.state.userId,name:a.name,watched:0,episode_total:parseInt(a.episodes)});case 2:return n=t.sent,t.next=5,e.addEpisodes(n.insertedId,a.name,a.episodes);case 5:return t.next=7,e.displayAnimes();case 7:return r=t.sent,e.setState({animes:r}),t.abrupt("return",n);case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.deleteAnime=function(){var t=Object(l.a)(c.a.mark(function t(a){var n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.db.collection("animes").deleteOne({_id:a});case 2:return t.next=4,e.db.collection("episodes").deleteMany({anime_id:a});case 4:return t.next=6,e.displayAnimes();case 6:n=t.sent,e.setState({animes:n});case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.incrementWatched=function(){var t=Object(l.a)(c.a.mark(function t(a,n){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.db.collection("animes").updateOne({_id:a},{$inc:{watched:n}});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),e.displayAnimes=Object(l.a)(c.a.mark(function t(){var a,n,r=arguments;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:{},t.next=3,e.db.collection("animes").find(a,{limit:1e3}).asArray();case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)})),e.addEpisodes=function(){var t=Object(l.a)(c.a.mark(function t(a,n,r){var i,s,o,l;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(i=[],s=1;s<=r;s++)o={anime_id:a,name:n,owner_id:e.state.userId,episode:s,watched:!1,watchedAt:new Date},i.push(o);return t.next=4,e.db.collection("episodes").insertMany(i);case 4:return t.next=6,e.displayEpisodes(a);case 6:return l=t.sent,t.abrupt("return",l);case 8:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}(),e.displayEpisodes=function(){var t=Object(l.a)(c.a.mark(function t(a){var n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.db.collection("episodes").find({anime_id:a},{limit:1e3}).asArray();case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.toggleEpisode=function(){var t=Object(l.a)(c.a.mark(function t(a,n,r){var i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.db.collection("episodes").updateOne({_id:n},{$set:{watched:!r,watchedAt:new Date}});case 2:return i=t.sent,console.log(r,i),t.next=6,e.incrementWatched(a,r?-1:1);case 6:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}(),e.watchEpisodes=function(){var t=Object(l.a)(c.a.mark(function t(a,n){var r,i,s,o=arguments;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:new Date,t.next=3,e.db.collection("episodes").find({anime_id:a,watched:!1},{limit:n}).asArray();case 3:return i=t.sent,s=i.map(function(e){return e._id}),t.next=7,e.db.collection("episodes").updateMany({_id:{$in:s}},{$set:{watched:!0,watchedAt:r}});case 7:return t.next=9,e.incrementWatched(a,n);case 9:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),e.displayActivity=Object(l.a)(c.a.mark(function t(){var a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.db.collection("episodes").find({watched:!0},{limit:1e3,sort:{watchedAt:-1}}).asArray();case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},t)})),e.register=Object(l.a)(c.a.mark(function e(){var t,a,n,r,i=arguments;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},a=t.email,n=t.password,e.prev=1,e.next=4,ce.registerWithEmail(a,n);case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])})),e.login=Object(l.a)(c.a.mark(function t(){var a,n,r,i,s,o,l=arguments;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=l.length>0&&void 0!==l[0]?l[0]:{},n=a.email,r=a.password,!e.state.isAuthed){t.next=4;break}return t.abrupt("return");case 4:return i=new v.d(n,r),t.next=7,oe.auth.loginWithCredential(i);case 7:return s=t.sent,t.next=10,e.displayAnimes();case 10:o=t.sent,e.setState({animes:o,isAuthed:!0,userId:new v.a.ObjectId(s.id)});case 12:case"end":return t.stop()}},t)})),e.logout=Object(l.a)(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:oe.auth.logout(),e.setState({isAuthed:!1});case 2:case"end":return t.stop()}},t)})),e.state={animes:[],isAuthed:!1,userId:null},e.db=ce.db("sugoi"),e.register=e.register.bind(Object(h.a)(e)),e.login=e.login.bind(Object(h.a)(e)),e.logout=e.logout.bind(Object(h.a)(e)),e.displayEpisodes=e.displayEpisodes.bind(Object(h.a)(e)),e.displayAnimes=e.displayAnimes.bind(Object(h.a)(e)),e.addAnime=e.addAnime.bind(Object(h.a)(e)),e.deleteAnime=e.deleteAnime.bind(Object(h.a)(e)),e}return Object(f.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){var e=this;return r.a.createElement(_.a,null,r.a.createElement(se,{isAuthed:this.state.isAuthed,logout:this.logout}),this.state.isAuthed?r.a.createElement(b.d,null,r.a.createElement(b.a,{from:"/login",to:"/"}),r.a.createElement(b.a,{from:"/register",to:"/"}),r.a.createElement(b.b,{default:!0,exact:!0,path:"/",render:function(t){return r.a.createElement(I,Object.assign({},t,{displayActivity:e.displayActivity}))}}),r.a.createElement(b.b,{path:"/list",render:function(t){return r.a.createElement(k,Object.assign({},t,{episodeStream:e.episodeStream,animes:e.state.animes}))}}),r.a.createElement(b.b,{path:"/anime",render:function(t){return r.a.createElement(V,Object.assign({},t,{toggleEpisode:e.toggleEpisode,displayAnimes:e.displayAnimes,displayEpisodes:e.displayEpisodes,deleteAnime:e.deleteAnime}))}}),r.a.createElement(b.b,{path:"/addanime",render:function(t){return r.a.createElement(K,Object.assign({},t,{addAnime:e.addAnime}))}}),r.a.createElement(b.b,{path:"/addepisodes",render:function(t){return r.a.createElement(q,Object.assign({},t,{watchEpisodes:e.watchEpisodes,displayAnimes:e.displayAnimes}))}})):r.a.createElement(b.d,null,r.a.createElement(b.b,{default:!0,exact:!0,path:"/login",render:function(t){return r.a.createElement(ae,Object.assign({},t,{loginUser:e.login}))}}),r.a.createElement(b.b,{path:"/register",render:function(t){return r.a.createElement(Z,Object.assign({},t,{registerUser:e.register}))}})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[46,1,2]]]);
//# sourceMappingURL=main.d96b2bd0.chunk.js.map